<!DOCTYPE html>
<html dir="ltr" lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
        <title>Web Components - NTT Data</title>

        <script type="module" src="/build/ejemplonova.esm.js"></script>
        <script nomodule src="/build/ejemplonova.js"></script>
    </head>
    <body>
        <custom-hello></custom-hello>
        <custom-hello name="Rubén"></custom-hello>

        <script>
            class CustomHello extends HTMLElement {
                constructor() {
                    super();
                }

                connectedCallback() {
                    if (this.isConnected) {
                        const name = this.getAttribute('name');
                        const h1 = document.createElement('h1');
                        h1.id = "name";
                        h1.textContent = `Hola ${name || 'mundo'}`;
                        this.appendChild(h1);
                    }
                }

                attributeChangedCallback(attribute, oldValue, newValue) {
                    switch (attribute) {
                        case 'name':
                            this.querySelector('#name').textContent = `Hola ${newValue || 'mundo'}`;
                            break;
                        default:
                            break;
                    }
                }

                static get observedAttributes() {
                    return ['name'];
                }
            }

            customElements.define('custom-hello', CustomHello);

            setTimeout(() => {
                document.querySelector("custom-hello").setAttribute("name", "Rubén");
            }, 10000);
        </script>
    </body>
</html>

